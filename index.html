<!DOCTYPE html>
<html>
<head>
    <title>Image Classifier</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
</head>
<body>
    <h1 class="text-center">Image Classifier</h1>

    <form class="p-3 text-center" enctype="multipart/form-data">
        <input class="form-control" type="file" id="imageFile" accept="image/*">
        <button class="btn btn-primary mt-3" type="button" id="predictButton">Predict Image</button>
    </form>

    <p class="text-center mt-3" id="predictionResult"></p>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>

        $(document).ready(function() {
    var imageFileInput = document.getElementById('imageFile');
    var predictButton = document.getElementById('predictButton');
    var predictionResult = document.getElementById('predictionResult');

    predictButton.addEventListener('click', async function() {
        var file = imageFileInput.files[0];
        if (!file) {
            predictionResult.textContent = 'Please select an image.';
            return;
        }

        var formData = new FormData();
        formData.append('imagefile', file);

        try {
            var response = await fetch('https://localhost:10000/predict', {
                method: 'POST',
                body: formData
            });

            if (response.ok) {
                var prediction = await response.text();
                predictionResult.textContent = 'Prediction: ' + prediction;
            } else {
                var errorMessage = await response.text();
                predictionResult.textContent = 'Error: ' + errorMessage;
            }
        } catch (error) {
            predictionResult.textContent = 'An error occurred.';
            console.error('Error:', error);
        }
    });
});
        
    </script>
</body>
</html>
